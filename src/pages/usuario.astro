---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Panader√≠a Aurora - Usuario">
  <!-- Header -->
  <section class="bg-gradient-to-r from-amber-100 to-orange-100 py-12">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-4xl font-bold text-amber-800 mb-4">Mi Cuenta</h2>
      <p class="text-xl text-amber-700">Gestiona tu perfil y preferencias</p>
    </div>
  </section>

  <!-- Contenido Principal -->
  <section class="py-12">
    <div class="max-w-4xl mx-auto px-4">
      
      <!-- Tabs de Navegaci√≥n -->
      <div class="flex flex-wrap border-b border-amber-200 mb-8">
        <button class="user-tab active px-6 py-3 text-amber-800 border-b-2 border-amber-600 font-semibold" data-tab="profile">
          üë§ Perfil
        </button>
        <button class="user-tab px-6 py-3 text-amber-600 hover:text-amber-800 transition-colors" data-tab="orders">
          üìã Pedidos
        </button>
        <button class="user-tab px-6 py-3 text-amber-600 hover:text-amber-800 transition-colors" data-tab="preferences">
          ‚öôÔ∏è Preferencias
        </button>
      </div>

      <!-- Tab: Perfil -->
      <div id="profile-tab" class="tab-content">
        <div class="grid md:grid-cols-2 gap-8">
          <!-- Informaci√≥n Personal -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-2xl font-bold text-amber-800 mb-6 flex items-center">
              <span class="mr-2">üë§</span>
              Informaci√≥n Personal
            </h3>
            
            <form class="space-y-4" id="profile-form">
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Nombre Completo</label>
                <input type="text" id="fullName" class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="Juan P√©rez">
              </div>
              
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Email</label>
                <input type="email" id="email" class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="juan@email.com">
              </div>
              
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Tel√©fono</label>
                <input type="tel" id="phone" class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="(555) 123-4567">
              </div>
              
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Direcci√≥n</label>
                <textarea id="address" rows="3" class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="Calle Principal 123, Ciudad"></textarea>
              </div>
              
              <button type="submit" class="w-full bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700 transition-colors font-semibold">
                Guardar Cambios
              </button>
            </form>
          </div>

          <!-- Estad√≠sticas del Usuario -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-2xl font-bold text-amber-800 mb-6 flex items-center">
              <span class="mr-2">üìä</span>
              Mis Estad√≠sticas
            </h3>
            
            <div class="space-y-6">
              <div class="text-center bg-amber-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-amber-600" id="total-orders">12</div>
                <div class="text-amber-700">Pedidos Realizados</div>
              </div>
              
              <div class="text-center bg-amber-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-amber-600" id="total-spent">$248.50</div>
                <div class="text-amber-700">Total Gastado</div>
              </div>
              
              <div class="text-center bg-amber-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-amber-600" id="favorite-product">ü•ê</div>
                <div class="text-amber-700">Producto Favorito</div>
                <div class="text-sm text-amber-600">Croissants</div>
              </div>
              
              <div class="text-center bg-amber-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-amber-600">‚≠ê</div>
                <div class="text-amber-700">Cliente Premium</div>
                <div class="text-sm text-amber-600">Descuentos especiales</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Pedidos -->
      <div id="orders-tab" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-2xl font-bold text-amber-800 mb-6 flex items-center">
            <span class="mr-2">üìã</span>
            Historial de Pedidos
          </h3>
          
          <div class="space-y-4">
            <!-- Pedido 1 -->
            <div class="border border-amber-200 rounded-lg p-4 hover:shadow-md transition-shadow">
              <div class="flex justify-between items-start mb-2">
                <div>
                  <h4 class="font-semibold text-amber-800">#001234</h4>
                  <p class="text-sm text-amber-600">15 de Enero, 2024 - 10:30 AM</p>
                </div>
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">Entregado</span>
              </div>
              <div class="text-amber-700 mb-2">
                2x Croissants Artesanales, 1x Caf√© Americano, 1x Tarta de Chocolate
              </div>
              <div class="flex justify-between items-center">
                <span class="font-bold text-amber-800">Total: $25.50</span>
                <button class="text-amber-600 hover:text-amber-800 text-sm font-semibold">Ver Detalles</button>
              </div>
            </div>
            
            <!-- Pedido 2 -->
            <div class="border border-amber-200 rounded-lg p-4 hover:shadow-md transition-shadow">
              <div class="flex justify-between items-start mb-2">
                <div>
                  <h4 class="font-semibold text-amber-800">#001235</h4>
                  <p class="text-sm text-amber-600">18 de Enero, 2024 - 2:15 PM</p>
                </div>
                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold">En Preparaci√≥n</span>
              </div>
              <div class="text-amber-700 mb-2">
                1x Pan Integral, 3x Cookies de Chocolate, 1x Cappuccino
              </div>
              <div class="flex justify-between items-center">
                <span class="font-bold text-amber-800">Total: $12.25</span>
                <button class="text-amber-600 hover:text-amber-800 text-sm font-semibold">Cancelar Pedido</button>
              </div>
            </div>
            
            <!-- Pedido 3 -->
            <div class="border border-amber-200 rounded-lg p-4 hover:shadow-md transition-shadow">
              <div class="flex justify-between items-start mb-2">
                <div>
                  <h4 class="font-semibold text-amber-800">#001236</h4>
                  <p class="text-sm text-amber-600">20 de Enero, 2024 - 8:45 AM</p>
                </div>
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">En Camino</span>
              </div>
              <div class="text-amber-700 mb-2">
                4x Cupcakes de Vainilla, 1x T√© Chai Latte
              </div>
              <div class="flex justify-between items-center">
                <span class="font-bold text-amber-800">Total: $14.75</span>
                <button class="text-amber-600 hover:text-amber-800 text-sm font-semibold">Rastrear Pedido</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Preferencias -->
      <div id="preferences-tab" class="tab-content hidden">
        <div class="grid md:grid-cols-2 gap-8">
          <!-- Preferencias de Notificaciones -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-2xl font-bold text-amber-800 mb-6 flex items-center">
              <span class="mr-2">üîî</span>
              Notificaciones
            </h3>
            
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-amber-800">Ofertas Especiales</p>
                  <p class="text-sm text-amber-600">Recibe notificaciones sobre descuentos</p>
                </div>
                <input type="checkbox" id="offers" class="w-5 h-5 text-amber-600" checked>
              </div>
              
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-amber-800">Estado del Pedido</p>
                  <p class="text-sm text-amber-600">Actualizaciones sobre tus pedidos</p>
                </div>
                <input type="checkbox" id="order-status" class="w-5 h-5 text-amber-600" checked>
              </div>
              
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-amber-800">Nuevos Productos</p>
                  <p class="text-sm text-amber-600">Conoce nuestras novedades</p>
                </div>
                <input type="checkbox" id="new-products" class="w-5 h-5 text-amber-600">
              </div>
            </div>
          </div>

          <!-- Preferencias de Entrega -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-2xl font-bold text-amber-800 mb-6 flex items-center">
              <span class="mr-2">üöö</span>
              Entrega
            </h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-amber-700 font-semibold mb-2">M√©todo Preferido</label>
                <select class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500">
                  <option>Entrega a Domicilio</option>
                  <option>Recoger en Tienda</option>
                </select>
              </div>
              
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Horario Preferido</label>
                <select class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500">
                  <option>Ma√±ana (8:00 - 12:00)</option>
                  <option>Tarde (12:00 - 18:00)</option>
                  <option>Noche (18:00 - 20:00)</option>
                </select>
              </div>
              
              <div>
                <label class="block text-amber-700 font-semibold mb-2">Instrucciones Especiales</label>
                <textarea rows="3" class="w-full border border-amber-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="Ej: Tocar el timbre, no dejar en la puerta..."></textarea>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-8 text-center">
          <button class="bg-amber-600 text-white px-8 py-3 rounded-lg hover:bg-amber-700 transition-colors font-semibold">
            Guardar Preferencias
          </button>
        </div>
      </div>

    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Funcionalidad de tabs
      const tabButtons = document.querySelectorAll('.user-tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const tabId = button.getAttribute('data-tab');
          
          // Actualizar botones activos
          tabButtons.forEach(btn => {
            btn.classList.remove('active', 'border-amber-600', 'text-amber-800');
            btn.classList.add('text-amber-600');
          });
          
          button.classList.add('active', 'border-amber-600', 'text-amber-800');
          button.classList.remove('text-amber-600');
          
          // Mostrar/ocultar contenido
          tabContents.forEach(content => {
            content.classList.add('hidden');
          });
          
          document.getElementById(`${tabId}-tab`).classList.remove('hidden');
        });
      });

      // Cargar datos del usuario desde localStorage
      const loadUserData = () => {
        const userData = JSON.parse(localStorage.getItem('userData') || '{}');
        
        if (userData.fullName) document.getElementById('fullName').value = userData.fullName;
        if (userData.email) document.getElementById('email').value = userData.email;
        if (userData.phone) document.getElementById('phone').value = userData.phone;
        if (userData.address) document.getElementById('address').value = userData.address;
      };

      // Guardar datos del usuario
      document.getElementById('profile-form').addEventListener('submit', (e) => {
        e.preventDefault();
        
        const userData = {
          fullName: document.getElementById('fullName').value,
          email: document.getElementById('email').value,
          phone: document.getElementById('phone').value,
          address: document.getElementById('address').value
        };
        
        localStorage.setItem('userData', JSON.stringify(userData));
        
        // Mostrar mensaje de √©xito
        alert('¬°Perfil actualizado correctamente!');
      });

      // Cargar datos al iniciar
      loadUserData();
    });
  </script>
</Layout>

